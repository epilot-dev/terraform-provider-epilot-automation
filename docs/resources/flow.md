---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "epilot-automation_flow Resource - terraform-provider-epilot-automation"
subcategory: ""
description: |-
  Flow Resource
---

# epilot-automation_flow (Resource)

Flow Resource

## Example Usage

```terraform
resource "epilot-automation_flow" "my_flow" {
  actions = [
    "{ \"see\": \"documentation\" }"
  ]
  conditions = "{ \"see\": \"documentation\" }"
  disable_details = {
    blame       = "...my_blame..."
    disabled_at = "2020-11-06T17:41:34.866Z"
    disabled_by = "user"
  }
  enabled       = true
  entity_schema = "submission"
  flow_name     = "Handle contact form"
  manifest = [
    "123e4567-e89b-12d3-a456-426614174000"
  ]
  max_executions = {
    count  = 100
    window = "PT1M"
  }
  schedules   = "{ \"see\": \"documentation\" }"
  system_flow = true
  trigger_conditions = [
    "{ \"see\": \"documentation\" }"
  ]
  triggers = [
    {
      journey_submit_trigger = {
        configuration = {
          source_id = "36ccf21c-051d-4bb7-84ad-d0eb26b2da79"
        }
        id   = "12d4f45a-1883-4841-a94c-5928cb338a94"
        type = "journey_submission"
      }
    }
  ]
  version = 2
  workflow_context = {
    task_id       = "ad6bb2d1-dbe2-4e95-a375-270d63198b77"
    workflow_id   = "8f4715e9-dd08-4118-9b22-81391910ac22"
    workflow_role = "run_task_automation"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `actions` (List of String) The actions (nodes) of the automation flow
- `flow_name` (String) A descriptive name for the Automation
- `triggers` (Attributes List) (see [below for nested schema](#nestedatt--triggers))

### Optional

- `conditions` (String) Parsed as JSON.
- `disable_details` (Attributes) (see [below for nested schema](#nestedatt--disable_details))
- `enabled` (Boolean) Whether the automation is enabled or not
- `entity_schema` (String) The triggering entity schema
- `manifest` (List of String) Source blueprint/manifest ID used when automation is created via blueprints.
- `max_executions` (Attributes) Customized execution hot flow rate limit. Takes precedence over the default hot flow rate limit if specified. (see [below for nested schema](#nestedatt--max_executions))
- `schedules` (String) Parsed as JSON.
- `system_flow` (Boolean) Determines if the flow is a system generated flow
- `trigger_conditions` (List of String)
- `version` (Number) Version of the flow
- `workflow_context` (Attributes) For automation that are connected to workflows V2, this field tracks various information about the workflow. (see [below for nested schema](#nestedatt--workflow_context))

### Read-Only

- `id` (String) ID of the Automation Flow

<a id="nestedatt--triggers"></a>
### Nested Schema for `triggers`

Optional:

- `any` (String) Parsed as JSON.
- `api_submission_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--api_submission_trigger))
- `entity_manual_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_manual_trigger))
- `entity_operation_trigger` (Attributes) - If provides filter_config, executes an automation based on the filtered configuration when an entity event occurs.
- The conditions on a filter follows the event bridge patterns - `https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html`
  | Comparison             | Example                                             | Rule syntax                                              |
  |------------------------|-----------------------------------------------------|----------------------------------------------------------|
  | Null                   | first_name is null                                  | `"first_name": [ null ]`                                 |
  | Empty                  | last_name is empty                                  | `"last_name": [""]`                                      |
  | Equals                 | email is "j.doe@email.com"                          | `"email": [ "j.doe@email.com" ]`                         |
  | Equals (ignore case)   | first_name is "John"                                | `"first_name": [ { "equals-ignore-case": "john" } ]`     |
  | And                    | fist_name is "John" and last_name is "Doe"          | `"first_name": [ "John" ], "last_name": ["Doe"]`         |
  | Or                     | PaymentType is "Invoice" or "SEPA"                  | `"PaymentType": [ "invoice", "sepa"]`                    |
  | Or (multiple fields)   | first_name is "John", or last_name is "Doe".        | `"$or": [ { "first_name": [ "John" ] }, { "last_name": [ "Doe" ] } ]` |
  | Not                    | status is anything but "cancelled"                  | `"status": [ { "anything-but": [ "cancelled" ] } ]`      |
  | Numeric (equals)       | Price is 100                                        | `"Price": [ { "numeric": [ "=", 100 ] } ]`               |
  | Numeric (range)        | Price is more than 10, and less than or equal to 20 | `"Price": [ { "numeric": [ ">", 10, "<=", 20 ] } ]`      |
  | Exists                 | ProductName exists                                  | `"ProductName": [ { "exists": true } ]`                  |
  | Does not exist         | ProductName does not exist                          | `"ProductName": [ { "exists": false } ]`                 |
  | Begins with            | OpportunityNumber starts with OPP-                  | `"opportunity_number": [ { "prefix": "OPP-" } ]`         |
  | Ends with              | FileName ends with a .png extension                 | `"filename": [ { "suffix": ".png" } ]`                   |
  | Wildcard               | search a string using a wildcard                    | `"email": [ { "wildcard": "*@doe.com" } ]`               |
  - To run the execution on all update events
    ```
      {
        "type": "filter_entity_event",
        "configuration": {
          "operation": {
            "operation": ["updateEntity"]
          }
        }
      }
    ```
  - To run the execution only when the updates are from a portal user
    ```
      {
        "type": "filter_entity_event",
        "configuration": {
          "operation": {
            "operation": ["updateEntity"]
          },
          "activity": {
            "type": "EntityUpdatedFromPortal"
          }
        }
      }
    ```
  - To run the execution only when there is an update on a specific attribute
    ```
      Only starts the automation when the email on a contact is changed
      {
        "type": "filter_entity_event",
        "configuration": {
          "operation": {
            "operation": ["updateEntity"],
            "payload": {
              "_schema": ["contact"]
            },
            "diff": {
              "updated": {
                "email": [{ "exists": true }]
              }
            }
          }
        }
      }
    ```
    - To run the execution only when a specific attribute is altered(created/updated/deleted)
      ```
        Only starts the automation when a price is altered on a contract
        {
          "type": "filter_entity_event",
          "configuration": {
            "operation": {
              "payload": {
                "_schema": ["contract"]
              },
              "diff": {
                // Whether he first_name has been added, updated, or removed
                $or: [
                  {
                    'added.first_name': [{ exists: true }]
                  },
                  {
                    'updated.first_name': [{ exists: true }]
                  },
                  {
                    'deleted.first_name': [{ exists: true }]
                  }
                ]
              }
            }
          }
        }
      ```
    - To run the execution if an attribute is changed from one state to another
      ```
        Only starts the automation when the order status changes from `open_for_acceptance` to `placed`
        {
          "type": "filter_entity_event",
          "configuration": {
            "operation": {
              "operation": ["updateEntity"],
              "payload": {
                "_schema": ["order"],
                "status": ["placed"]
              },
              "diff": {
                "updated": {
                  "status": ["open_for_acceptance"]
                }
              }
            }
          }
        }
      ``` (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger))
- `flows_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--flows_trigger))
- `frontend_submit_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--frontend_submit_trigger))
- `journey_submit_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--journey_submit_trigger))
- `received_email_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--received_email_trigger))

<a id="nestedatt--triggers--api_submission_trigger"></a>
### Nested Schema for `triggers.api_submission_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--api_submission_trigger--configuration))
- `id` (String)
- `type` (String) Not Null; must be "api_submission"

<a id="nestedatt--triggers--api_submission_trigger--configuration"></a>
### Nested Schema for `triggers.api_submission_trigger.configuration`

Optional:

- `source_id` (String)



<a id="nestedatt--triggers--entity_manual_trigger"></a>
### Nested Schema for `triggers.entity_manual_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--entity_manual_trigger--configuration))
- `id` (String)
- `type` (String) Not Null; must be "entity_manual"

<a id="nestedatt--triggers--entity_manual_trigger--configuration"></a>
### Nested Schema for `triggers.entity_manual_trigger.configuration`

Optional:

- `schema` (String) Which entity type can this automation be triggered from



<a id="nestedatt--triggers--entity_operation_trigger"></a>
### Nested Schema for `triggers.entity_operation_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration))
- `id` (String)
- `type` (String) Not Null; must be "entity_operation"

<a id="nestedatt--triggers--entity_operation_trigger--configuration"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration`

Optional:

- `ecp_config` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--ecp_config))
- `exclude_activities` (List of String)
- `filter_config` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config))
- `include_activities` (List of String)
- `operations` (List of String)
- `schema` (String)

<a id="nestedatt--triggers--entity_operation_trigger--configuration--ecp_config"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.ecp_config`

Optional:

- `file_config` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--ecp_config--file_config))
- `origin` (String)
- `portal_id` (String)

<a id="nestedatt--triggers--entity_operation_trigger--configuration--ecp_config--file_config"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.ecp_config.file_config`

Optional:

- `shared_with_end_customer` (Boolean)



<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config`

Optional:

- `activity` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity))
- `operation` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--operation))

<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.activity`

Optional:

- `type` (Attributes List) Filter on activity type. If not specified, all activities will be matched on execution.
Example:
  1. Filter the events when an entity is updated from portal
    ```
      {
        "activity":{
          "type": ["EntityUpdatedFromPortal"]
        }
      }
    ```
  2. Filter the events when either a doc is uploaded/removed on an entity from a portal
    ```
      {
        "activity":{
          "type": ["DocUploadedFromPortal", "DocRemovedFromPortal"]
        }
      }
    ``` (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type))

<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.activity.type`

Optional:

- `anything_but_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--anything_but_condition))
- `equals_ignore_case_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--equals_ignore_case_condition))
- `exists_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--exists_condition))
- `prefix_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--prefix_condition))
- `str` (String)
- `suffix_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--suffix_condition))
- `wildcard_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--wildcard_condition))

<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--anything_but_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.activity.type.anything_but_condition`

Optional:

- `anything_but` (List of String)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--equals_ignore_case_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.activity.type.equals_ignore_case_condition`

Optional:

- `equals_ignore_case` (String)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--exists_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.activity.type.exists_condition`

Optional:

- `exists` (Boolean)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--prefix_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.activity.type.prefix_condition`

Optional:

- `prefix` (String)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--suffix_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.activity.type.suffix_condition`

Optional:

- `suffix` (String)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--activity--type--wildcard_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.activity.type.wildcard_condition`

Optional:

- `wildcard` (String)




<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config--operation"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.filter_config.operation`

Optional:

- `diff` (String) Parsed as JSON.
- `operation` (List of String) Filter on operation type. If not specified, all operations will be matched on execution.
Example:
  1. Filter all the createEntity/updateEntity operations
  ```
    {
      "operation":{
        "operation": ["createEntity", "updateEntity"]
      }
    }
  ```
- `payload` (String) Parsed as JSON.





<a id="nestedatt--triggers--flows_trigger"></a>
### Nested Schema for `triggers.flows_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--flows_trigger--configuration))
- `id` (String)
- `type` (String) Not Null; must be "flows_trigger"

<a id="nestedatt--triggers--flows_trigger--configuration"></a>
### Nested Schema for `triggers.flows_trigger.configuration`

Optional:

- `journey_id` (String) When Journeys are linked to Workflows V2 as Journey Automations, this field will contain the ID of the Journey
- `source_id` (String) The ID of the workflow v2 that triggers this automation. Not Null



<a id="nestedatt--triggers--frontend_submit_trigger"></a>
### Nested Schema for `triggers.frontend_submit_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--frontend_submit_trigger--configuration))
- `id` (String)
- `type` (String) Not Null; must be "frontend_submission"

<a id="nestedatt--triggers--frontend_submit_trigger--configuration"></a>
### Nested Schema for `triggers.frontend_submit_trigger.configuration`

Optional:

- `source_id` (String)



<a id="nestedatt--triggers--journey_submit_trigger"></a>
### Nested Schema for `triggers.journey_submit_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--journey_submit_trigger--configuration))
- `id` (String)
- `type` (String) Not Null; must be "journey_submission"

<a id="nestedatt--triggers--journey_submit_trigger--configuration"></a>
### Nested Schema for `triggers.journey_submit_trigger.configuration`

Optional:

- `source_id` (String) Not Null



<a id="nestedatt--triggers--received_email_trigger"></a>
### Nested Schema for `triggers.received_email_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--received_email_trigger--configuration))
- `id` (String)
- `type` (String) Not Null; must be "received_email"

<a id="nestedatt--triggers--received_email_trigger--configuration"></a>
### Nested Schema for `triggers.received_email_trigger.configuration`

Optional:

- `message_type` (String) must be "RECEIVED"




<a id="nestedatt--disable_details"></a>
### Nested Schema for `disable_details`

Optional:

- `blame` (String) The 360 user email that disabled the flow
- `disabled_at` (String) When the flow was disabled. Not Null
- `disabled_by` (String) Who disabled the flow (system or user). Not Null; must be one of ["system", "user"]


<a id="nestedatt--max_executions"></a>
### Nested Schema for `max_executions`

Optional:

- `count` (Number) Maximum number of executions per time window
- `window` (String) ISO 8601 duration time window for the threshold


<a id="nestedatt--workflow_context"></a>
### Nested Schema for `workflow_context`

Optional:

- `task_id` (String) The ID of the task in the workflow that this automation is connected to
- `workflow_id` (String) The ID of the workflow this automation is connected to. Not Null
- `workflow_role` (String) The role this automation plays in the workflow. Not Null; must be one of ["trigger_workflow", "run_task_automation"]

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = epilot-automation_flow.my_epilot-automation_flow
  id = "7791b04a-16d2-44a2-9af9-2d59c25c512f"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import epilot-automation_flow.my_epilot-automation_flow "7791b04a-16d2-44a2-9af9-2d59c25c512f"
```
