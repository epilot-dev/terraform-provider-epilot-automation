---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "epilot-automation_flow Resource - terraform-provider-epilot-automation"
subcategory: ""
description: |-
  Flow Resource
---

# epilot-automation_flow (Resource)

Flow Resource

## Example Usage

```terraform
resource "epilot-automation_flow" "my_flow" {
  actions = [
    "{ \"see\": \"documentation\" }",
  ]
  enabled       = false
  entity_schema = "submission"
  flow_name     = "Handle contact form"
  runs          = 7
  system_flow   = true
  triggers = [
    {
      activity_trigger = {
        configuration = {
          schema = "submission"
          types = [
            "UpdateMeterReading",
          ]
        }
        type = "activity"
      }
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `actions` (List of String)
- `flow_name` (String) A descriptive name for the Automation
- `triggers` (Attributes List) (see [below for nested schema](#nestedatt--triggers))

### Optional

- `enabled` (Boolean) Whether the automation is enabled or not. Default: true
- `entity_schema` (String) The triggering entity schema
- `runs` (Number) Number of automation executions that ran
- `system_flow` (Boolean) Determines if the flow is a system generated flow
- `trigger_conditions` (List of String)

### Read-Only

- `created_at` (String)
- `created_by` (String) User / service who created automation flow
- `id` (String) Automation Workflow ID
- `last_updated_by` (String) User / service who last updated automation flow
- `org_id` (String) Organization the automation flow belongs to
- `updated_at` (String)

<a id="nestedatt--triggers"></a>
### Nested Schema for `triggers`

Optional:

- `activity_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--activity_trigger))
- `api_submission_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--api_submission_trigger))
- `entity_manual_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_manual_trigger))
- `entity_operation_trigger` (Attributes) - If provides filter_config, executes an automation based on the filtered configuration when an entity event occurs.
- The conditions on a filter follows the event bridge patterns - `https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html`
  | Comparison             | Example                                             | Rule syntax                                              |
  |------------------------|-----------------------------------------------------|----------------------------------------------------------|
  | Null                   | first_name is null                                  | `"first_name": [ null ]`                                 |
  | Empty                  | last_name is empty                                  | `"last_name": [""]`                                      |
  | Equals                 | email is "j.doe@email.com"                          | `"email": [ "j.doe@email.com" ]`                         |
  | Equals (ignore case)   | first_name is "John"                                | `"first_name": [ { "equals-ignore-case": "john" } ]`     |
  | And                    | fist_name is "John" and last_name is "Doe"          | `"first_name": [ "John" ], "last_name": ["Doe"]`         |
  | Or                     | PaymentType is "Invoice" or "SEPA"                  | `"PaymentType": [ "invoice", "sepa"]`                    |
  | Or (multiple fields)   | first_name is "John", or last_name is "Doe".        | `"$or": [ { "first_name": [ "John" ] }, { "last_name": [ "Doe" ] } ]` |
  | Not                    | status is anything but "cancelled"                  | `"status": [ { "anything-but": [ "cancelled" ] } ]`      |
  | Numeric (equals)       | Price is 100                                        | `"Price": [ { "numeric": [ "=", 100 ] } ]`               |
  | Numeric (range)        | Price is more than 10, and less than or equal to 20 | `"Price": [ { "numeric": [ ">", 10, "<=", 20 ] } ]`      |
  | Exists                 | ProductName exists                                  | `"ProductName": [ { "exists": true } ]`                  |
  | Does not exist         | ProductName does not exist                          | `"ProductName": [ { "exists": false } ]`                 |
  | Begins with            | OpportunityNumber starts with OPP-                  | `"opportunity_number": [ { "prefix": "OPP-" } ]`         |
  | Ends with              | FileName ends with a .png extension                 | `"filename": [ { "suffix": ".png" } ]`                   |
  | Wildcard               | search a string using a wildcard                    | `"email": [ { "wildcard": "*@doe.com" } ]`               |
  - To run the execution on all update events
    ```
      {
        "type": "filter_entity_event",
        "configuration": {
          "operation": {
            "operation": ["updateEntity"]
          }
        }
      }
    ```
  - To run the execution only when the updates are from a portal user
    ```
      {
        "type": "filter_entity_event",
        "configuration": {
          "operation": {
            "operation": ["updateEntity"]
          },
          "activity": {
            "type": "EntityUpdatedFromPortal"
          }
        }
      }
    ```
  - To run the execution only when there is an update on a specific attribute
    ```
      Only starts the automation when the email on a contact is changed
      {
        "type": "filter_entity_event",
        "configuration": {
          "operation": {
            "operation": ["updateEntity"],
            "payload": {
              "_schema": ["contact"]
            },
            "diff": {
              "updated": {
                "email": [{ "exists": true }]
              }
            }
          }
        }
      }
    ```
    - To run the execution only when a specific attribute is altered(created/updated/deleted)
      ```
        Only starts the automation when a price is altered on a contract
        {
          "type": "filter_entity_event",
          "configuration": {
            "operation": {
              "payload": {
                "_schema": ["contract"]
              },
              "diff": {
                // Whether he first_name has been added, updated, or removed
                $or: [
                  {
                    'added.first_name': [{ exists: true }]
                  },
                  {
                    'updated.first_name': [{ exists: true }]
                  },
                  {
                    'deleted.first_name': [{ exists: true }]
                  }
                ]
              }
            }
          }
        }
      ```
    - To run the execution if an attribute is changed from one state to another
      ```
        Only starts the automation when the order status changes from `open_for_acceptance` to `placed`
        {
          "type": "filter_entity_event",
          "configuration": {
            "operation": {
              "operation": ["updateEntity"],
              "payload": {
                "_schema": ["order"],
                "status": ["placed"]
              },
              "diff": {
                "updated": {
                  "status": ["open_for_acceptance"]
                }
              }
            }
          }
        }
      ``` (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger))
- `frontend_submit_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--frontend_submit_trigger))
- `journey_submit_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--journey_submit_trigger))
- `received_email_trigger` (Attributes) (see [below for nested schema](#nestedatt--triggers--received_email_trigger))

<a id="nestedatt--triggers--activity_trigger"></a>
### Nested Schema for `triggers.activity_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--activity_trigger--configuration))
- `type` (String) Not Null; must be one of ["activity"]

<a id="nestedatt--triggers--activity_trigger--configuration"></a>
### Nested Schema for `triggers.activity_trigger.configuration`

Optional:

- `schema` (String)
- `types` (List of String)



<a id="nestedatt--triggers--api_submission_trigger"></a>
### Nested Schema for `triggers.api_submission_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--api_submission_trigger--configuration))
- `type` (String) Not Null; must be one of ["api_submission"]

<a id="nestedatt--triggers--api_submission_trigger--configuration"></a>
### Nested Schema for `triggers.api_submission_trigger.configuration`

Optional:

- `source_id` (String)



<a id="nestedatt--triggers--entity_manual_trigger"></a>
### Nested Schema for `triggers.entity_manual_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--entity_manual_trigger--configuration))
- `type` (String) Not Null; must be one of ["entity_manual"]

<a id="nestedatt--triggers--entity_manual_trigger--configuration"></a>
### Nested Schema for `triggers.entity_manual_trigger.configuration`

Optional:

- `schema` (String) Which entity type can this automation be triggered from



<a id="nestedatt--triggers--entity_operation_trigger"></a>
### Nested Schema for `triggers.entity_operation_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration))
- `type` (String) Not Null; must be one of ["entity_operation"]

<a id="nestedatt--triggers--entity_operation_trigger--configuration"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration`

Optional:

- `exclude_activities` (List of String)
- `filter_config` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--filter_config))
- `include_activities` (List of String)
- `operations` (List of String)
- `schema` (String)

<a id="nestedatt--triggers--entity_operation_trigger--configuration--filter_config"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema`

Optional:

- `activity` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--activity))
- `operation` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--operation))

<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--activity"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.activity`

Optional:

- `type` (Attributes List) Filter on activity type. If not specified, all activities will be matched on execution.
Example:
  1. Filter the events when an entity is updated from portal
    ```
      {
        "activity":{
          "type": ["EntityUpdatedFromPortal"]
        }
      }
    ```
  2. Filter the events when either a doc is uploaded/removed on an entity from a portal
    ```
      {
        "activity":{
          "type": ["DocUploadedFromPortal", "DocRemovedFromPortal"]
        }
      }
    ``` (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type))

<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.activity.type`

Optional:

- `anything_but_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--anything_but_condition))
- `equals_ignore_case_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--equals_ignore_case_condition))
- `exists_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--exists_condition))
- `prefix_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--prefix_condition))
- `str` (String)
- `suffix_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--suffix_condition))
- `wildcard_condition` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--wildcard_condition))

<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--anything_but_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.activity.type.wildcard_condition`

Optional:

- `anything_but` (List of String)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--equals_ignore_case_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.activity.type.wildcard_condition`

Optional:

- `equals_ignore_case` (String)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--exists_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.activity.type.wildcard_condition`

Optional:

- `exists` (Boolean)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--prefix_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.activity.type.wildcard_condition`

Optional:

- `prefix` (String)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--suffix_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.activity.type.wildcard_condition`

Optional:

- `suffix` (String)


<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--activity--type--wildcard_condition"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.activity.type.wildcard_condition`

Optional:

- `wildcard` (String)




<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--operation"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.operation`

Optional:

- `diff` (Attributes) (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--operation--diff))
- `operation` (List of String) Filter on operation type. If not specified, all operations will be matched on execution.
Example:
  1. Filter all the createEntity/updateEntity operations
  ```
    {
      "operation":{
        "operation": ["createEntity", "updateEntity"]
      }
    }
  ```
- `payload` (String) Parsed as JSON.

<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--operation--diff"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.operation.payload`

Optional:

- `any` (String) Parsed as JSON.
- `two` (Attributes) Diff to it's prior state when an entity is updated (see [below for nested schema](#nestedatt--triggers--entity_operation_trigger--configuration--schema--operation--payload--two))

<a id="nestedatt--triggers--entity_operation_trigger--configuration--schema--operation--payload--two"></a>
### Nested Schema for `triggers.entity_operation_trigger.configuration.schema.operation.payload.two`

Optional:

- `added` (String) Parsed as JSON.
- `deleted` (String) Parsed as JSON.
- `updated` (String) Parsed as JSON.







<a id="nestedatt--triggers--frontend_submit_trigger"></a>
### Nested Schema for `triggers.frontend_submit_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--frontend_submit_trigger--configuration))
- `type` (String) Not Null; must be one of ["frontend_submission"]

<a id="nestedatt--triggers--frontend_submit_trigger--configuration"></a>
### Nested Schema for `triggers.frontend_submit_trigger.configuration`

Optional:

- `source_id` (String)



<a id="nestedatt--triggers--journey_submit_trigger"></a>
### Nested Schema for `triggers.journey_submit_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--journey_submit_trigger--configuration))
- `type` (String) Not Null; must be one of ["journey_submission"]

<a id="nestedatt--triggers--journey_submit_trigger--configuration"></a>
### Nested Schema for `triggers.journey_submit_trigger.configuration`

Optional:

- `source_id` (String) Not Null



<a id="nestedatt--triggers--received_email_trigger"></a>
### Nested Schema for `triggers.received_email_trigger`

Optional:

- `configuration` (Attributes) Not Null (see [below for nested schema](#nestedatt--triggers--received_email_trigger--configuration))
- `type` (String) Not Null; must be one of ["received_email"]

<a id="nestedatt--triggers--received_email_trigger--configuration"></a>
### Nested Schema for `triggers.received_email_trigger.configuration`

Optional:

- `message_type` (String) must be one of ["RECEIVED"]


