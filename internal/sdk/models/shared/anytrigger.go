// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"errors"
	"fmt"
	"github.com/epilot-dev/terraform-provider-epilot-automation/internal/sdk/internal/utils"
)

type AnyTriggerType string

const (
	AnyTriggerTypeFrontendSubmitTrigger  AnyTriggerType = "FrontendSubmitTrigger"
	AnyTriggerTypeJourneySubmitTrigger   AnyTriggerType = "JourneySubmitTrigger"
	AnyTriggerTypeAPISubmissionTrigger   AnyTriggerType = "ApiSubmissionTrigger"
	AnyTriggerTypeEntityOperationTrigger AnyTriggerType = "EntityOperationTrigger"
	AnyTriggerTypeAny                    AnyTriggerType = "any"
	AnyTriggerTypeEntityManualTrigger    AnyTriggerType = "EntityManualTrigger"
	AnyTriggerTypeReceivedEmailTrigger   AnyTriggerType = "ReceivedEmailTrigger"
	AnyTriggerTypeFlowsTrigger           AnyTriggerType = "FlowsTrigger"
)

type AnyTrigger struct {
	FrontendSubmitTrigger  *FrontendSubmitTrigger  `queryParam:"inline,name=AnyTrigger" union:"member"`
	JourneySubmitTrigger   *JourneySubmitTrigger   `queryParam:"inline,name=AnyTrigger" union:"member"`
	APISubmissionTrigger   *APISubmissionTrigger   `queryParam:"inline,name=AnyTrigger" union:"member"`
	EntityOperationTrigger *EntityOperationTrigger `queryParam:"inline,name=AnyTrigger" union:"member"`
	Any                    any                     `queryParam:"inline,name=AnyTrigger" union:"member"`
	EntityManualTrigger    *EntityManualTrigger    `queryParam:"inline,name=AnyTrigger" union:"member"`
	ReceivedEmailTrigger   *ReceivedEmailTrigger   `queryParam:"inline,name=AnyTrigger" union:"member"`
	FlowsTrigger           *FlowsTrigger           `queryParam:"inline,name=AnyTrigger" union:"member"`

	Type AnyTriggerType
}

func CreateAnyTriggerFrontendSubmitTrigger(frontendSubmitTrigger FrontendSubmitTrigger) AnyTrigger {
	typ := AnyTriggerTypeFrontendSubmitTrigger

	return AnyTrigger{
		FrontendSubmitTrigger: &frontendSubmitTrigger,
		Type:                  typ,
	}
}

func CreateAnyTriggerJourneySubmitTrigger(journeySubmitTrigger JourneySubmitTrigger) AnyTrigger {
	typ := AnyTriggerTypeJourneySubmitTrigger

	return AnyTrigger{
		JourneySubmitTrigger: &journeySubmitTrigger,
		Type:                 typ,
	}
}

func CreateAnyTriggerAPISubmissionTrigger(apiSubmissionTrigger APISubmissionTrigger) AnyTrigger {
	typ := AnyTriggerTypeAPISubmissionTrigger

	return AnyTrigger{
		APISubmissionTrigger: &apiSubmissionTrigger,
		Type:                 typ,
	}
}

func CreateAnyTriggerEntityOperationTrigger(entityOperationTrigger EntityOperationTrigger) AnyTrigger {
	typ := AnyTriggerTypeEntityOperationTrigger

	return AnyTrigger{
		EntityOperationTrigger: &entityOperationTrigger,
		Type:                   typ,
	}
}

func CreateAnyTriggerAny(anyT any) AnyTrigger {
	typ := AnyTriggerTypeAny

	return AnyTrigger{
		Any:  anyT,
		Type: typ,
	}
}

func CreateAnyTriggerEntityManualTrigger(entityManualTrigger EntityManualTrigger) AnyTrigger {
	typ := AnyTriggerTypeEntityManualTrigger

	return AnyTrigger{
		EntityManualTrigger: &entityManualTrigger,
		Type:                typ,
	}
}

func CreateAnyTriggerReceivedEmailTrigger(receivedEmailTrigger ReceivedEmailTrigger) AnyTrigger {
	typ := AnyTriggerTypeReceivedEmailTrigger

	return AnyTrigger{
		ReceivedEmailTrigger: &receivedEmailTrigger,
		Type:                 typ,
	}
}

func CreateAnyTriggerFlowsTrigger(flowsTrigger FlowsTrigger) AnyTrigger {
	typ := AnyTriggerTypeFlowsTrigger

	return AnyTrigger{
		FlowsTrigger: &flowsTrigger,
		Type:         typ,
	}
}

func (u *AnyTrigger) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var frontendSubmitTrigger FrontendSubmitTrigger = FrontendSubmitTrigger{}
	if err := utils.UnmarshalJSON(data, &frontendSubmitTrigger, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  AnyTriggerTypeFrontendSubmitTrigger,
			Value: &frontendSubmitTrigger,
		})
	}

	var journeySubmitTrigger JourneySubmitTrigger = JourneySubmitTrigger{}
	if err := utils.UnmarshalJSON(data, &journeySubmitTrigger, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  AnyTriggerTypeJourneySubmitTrigger,
			Value: &journeySubmitTrigger,
		})
	}

	var apiSubmissionTrigger APISubmissionTrigger = APISubmissionTrigger{}
	if err := utils.UnmarshalJSON(data, &apiSubmissionTrigger, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  AnyTriggerTypeAPISubmissionTrigger,
			Value: &apiSubmissionTrigger,
		})
	}

	var entityOperationTrigger EntityOperationTrigger = EntityOperationTrigger{}
	if err := utils.UnmarshalJSON(data, &entityOperationTrigger, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  AnyTriggerTypeEntityOperationTrigger,
			Value: &entityOperationTrigger,
		})
	}

	var anyVar any = nil
	if err := utils.UnmarshalJSON(data, &anyVar, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  AnyTriggerTypeAny,
			Value: anyVar,
		})
	}

	var entityManualTrigger EntityManualTrigger = EntityManualTrigger{}
	if err := utils.UnmarshalJSON(data, &entityManualTrigger, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  AnyTriggerTypeEntityManualTrigger,
			Value: &entityManualTrigger,
		})
	}

	var receivedEmailTrigger ReceivedEmailTrigger = ReceivedEmailTrigger{}
	if err := utils.UnmarshalJSON(data, &receivedEmailTrigger, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  AnyTriggerTypeReceivedEmailTrigger,
			Value: &receivedEmailTrigger,
		})
	}

	var flowsTrigger FlowsTrigger = FlowsTrigger{}
	if err := utils.UnmarshalJSON(data, &flowsTrigger, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  AnyTriggerTypeFlowsTrigger,
			Value: &flowsTrigger,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for AnyTrigger", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for AnyTrigger", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(AnyTriggerType)
	switch best.Type {
	case AnyTriggerTypeFrontendSubmitTrigger:
		u.FrontendSubmitTrigger = best.Value.(*FrontendSubmitTrigger)
		return nil
	case AnyTriggerTypeJourneySubmitTrigger:
		u.JourneySubmitTrigger = best.Value.(*JourneySubmitTrigger)
		return nil
	case AnyTriggerTypeAPISubmissionTrigger:
		u.APISubmissionTrigger = best.Value.(*APISubmissionTrigger)
		return nil
	case AnyTriggerTypeEntityOperationTrigger:
		u.EntityOperationTrigger = best.Value.(*EntityOperationTrigger)
		return nil
	case AnyTriggerTypeAny:
		u.Any = best.Value.(any)
		return nil
	case AnyTriggerTypeEntityManualTrigger:
		u.EntityManualTrigger = best.Value.(*EntityManualTrigger)
		return nil
	case AnyTriggerTypeReceivedEmailTrigger:
		u.ReceivedEmailTrigger = best.Value.(*ReceivedEmailTrigger)
		return nil
	case AnyTriggerTypeFlowsTrigger:
		u.FlowsTrigger = best.Value.(*FlowsTrigger)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for AnyTrigger", string(data))
}

func (u AnyTrigger) MarshalJSON() ([]byte, error) {
	if u.FrontendSubmitTrigger != nil {
		return utils.MarshalJSON(u.FrontendSubmitTrigger, "", true)
	}

	if u.JourneySubmitTrigger != nil {
		return utils.MarshalJSON(u.JourneySubmitTrigger, "", true)
	}

	if u.APISubmissionTrigger != nil {
		return utils.MarshalJSON(u.APISubmissionTrigger, "", true)
	}

	if u.EntityOperationTrigger != nil {
		return utils.MarshalJSON(u.EntityOperationTrigger, "", true)
	}

	if u.Any != nil {
		return utils.MarshalJSON(u.Any, "", true)
	}

	if u.EntityManualTrigger != nil {
		return utils.MarshalJSON(u.EntityManualTrigger, "", true)
	}

	if u.ReceivedEmailTrigger != nil {
		return utils.MarshalJSON(u.ReceivedEmailTrigger, "", true)
	}

	if u.FlowsTrigger != nil {
		return utils.MarshalJSON(u.FlowsTrigger, "", true)
	}

	return nil, errors.New("could not marshal union type AnyTrigger: all fields are null")
}
